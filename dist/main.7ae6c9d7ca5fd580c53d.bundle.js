(()=>{var e={778:e=>{e.exports=function(){const e=[],t=[];return{randomFleet:e,randomCoord:()=>Math.floor(100*Math.random()),isCrossing(e,t){let o=0;return t.forEach((t=>{e.includes(t)&&o++})),0===o?(console.log("false"),!1):(console.log("true"),!0)},createBattleship(){const e=this.createRandomShipCoords(4);return this.isCrossing(t,e)?this.createBattleship():(console.log(e),e)},createDestroyer(){const e=this.createRandomShipCoords(3);return this.isCrossing(t,e)?this.createDestroyer():(console.log(e),e)},createSubmarine(){const e=this.createRandomShipCoords(3);return this.isCrossing(t,e)?this.createSubmarine():(console.log(e),e)},createPatrolBoat(){const e=this.createRandomShipCoords(2);return this.isCrossing(t,e)?this.createPatrolBoat():(console.log(e),e)},createRandomFleet(){const o=this.createRandomShipCoords(5);e.push([5,o]),o.forEach((e=>{t.push(e)})),console.log("first ship:",t);const r=this.createBattleship();e.push([4,r]),r.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const s=this.createDestroyer();e.push([3,s]),s.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const a=this.createSubmarine();e.push([3,a]),a.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const n=this.createPatrolBoat();e.push([2,n]),n.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t)},createRandomShipCoords(e){const t=[],o=Math.round(Math.random()),r=this.randomCoord();if(this.isFit(o,r,e)){if(0===o)for(let o=0;o<e;o++)t.push(r+o);else for(let o=0;o<e;o++)t.push(r+10*o);return console.log(t),t}return this.createRandomShipCoords(e)},createShipCoords(e,t,o){const r=[];if(0===e)for(let e=0;e<o;e++)r.push(t+e);else for(let e=0;e<o;e++)r.push(t+10*e);return console.log(r),r},createValidStartingPoint(e){const t=Math.round(Math.random()),o=this.randomCoord();return this.isFit(t,o,e)?(console.log("valid:",t,o,e),{axis:t,startingPoint:o,length:e}):this.createValidStartingPoint(e)},isFit(e,t,o){const r=10*Math.ceil((t+1)/10);return 1===e?t+10*(o-1)<100:t+(o-1)<r}}}},171:(e,t,o)=>{const r=o(417),s=o(778);e.exports=function(){const e=s();let t=!1;const o=[],a=[],n=document.querySelector("#player-battlefield"),i=document.querySelector("#computer-battlefield"),l=r().initNewGame(),c=l.Computer;!function(){e.createRandomFleet();const t=e.randomFleet;console.log(t);for(let e=0;e<t.length;e++)c.gameboard.placeShip(t[e][0],t[e][1])}();const d=document.querySelectorAll("[data-modal-target]"),h=document.querySelectorAll("[data-close-button]"),u=document.getElementById("ship"),m=document.getElementById("length"),p=document.getElementById("direction"),g=document.getElementById("overlay"),C=document.getElementById("player-place-ships"),f=document.querySelector("[data-rotate-button]");let S=0;const b=[["Carrier",5],["Battleship",4],["Destroyer",3],["Submarine",3],["Patrol boat",2]];function y(e){null!=e&&(e.classList.add("active"),g.classList.add("active"))}function v(e){null!=e&&(e.classList.remove("active"),g.classList.remove("active"))}d.forEach((e=>{e.addEventListener("click",(()=>{y(document.querySelector(e.dataset.modalTarget))}))})),g.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((e=>{v(e)}))})),h.forEach((e=>{e.addEventListener("click",(()=>{v(e.closest(".modal"))}))})),f.addEventListener("click",(()=>{console.log("Change direction!!!"),0===S?(S=1,p.textContent="Direction: Vertical"):(S=0,p.textContent="Direction: Horizontal"),console.log(S)}));const H=l.Human;H.gameboard.placeShip(2,[55,65]),H.gameboard.placeShip(3,[1,2,3]),H.gameboard.placeShip(3,[22,23,24]),H.gameboard.placeShip(5,[50,60,70,80,90]),H.gameboard.placeShip(4,[19,29,39,49]);const E=c.gameboard.getBattlefield(),F=H.gameboard.getBattlefield();return{playerComputer:c,playerHuman:H,createGrid(){const e=[],t=[];b.forEach((t=>{e.push(t[0])})),b.forEach((e=>{t.push(e[1])})),console.log(e),console.log(t);let o=t.shift(),r=e.shift(),s="Horizontal";s=1===S?"Vertical":"Horizontal",u.textContent=`Place your ${r}`,m.textContent=`Ship length: ${o} cells`,p.textContent=`Direction: ${s}`;const a=H.gameboard.getFleet();console.log(a);C.style.setProperty("--grid-rows",10),C.style.setProperty("--grid-cols",10);for(let n=0;n<E.length;n++){const i=document.createElement("div");i.dataset.id=n,F[n].isFree||(i.dataset.isFree="occupied"),F[n].isHit&&(i.dataset.isHit="hit"),F[n].shipId&&(i.dataset.shipId="ship"),C.appendChild(i).className="grid-item",i.addEventListener("mouseover",(()=>{const e=Number(i.dataset.id);this.checkCoordIsValid(e,o)?(console.log(e),i.dataset.valid=!0):(console.log(e),i.dataset.valid=!1)})),i.addEventListener("click",(()=>{const n=Number(i.dataset.id),l=this.createCoords(n,o);H.gameboard.placeShip(o,l),this.updatePlaceShipContainer(),this.updateHumanBoard(),r=e.shift(),o=t.shift(),s=1===S?"Vertical":"Horizontal",u.textContent=`Place your ${r}`,m.textContent=`Ship length: ${o} cells`,p.textContent=`Direction: ${s}`,console.log(r),console.log(o),console.log("Human fleet length:",a.length),10===a.length&&v(modal)}))}},checkCoordIsValid:(t,o)=>e.isFit(S,t,o)?(console.log("true"),!0):(console.log("false"),!1),createCoords(t,o){let r;return this.checkCoordIsValid(t,o)&&(r=e.createShipCoords(S,t,o)),r},updatePlaceShipContainer(){for(let e=0;e<F.length;e++){const t=document.querySelector(`[data-id="${e}"]`);F[e].isFree||(t.dataset.isFree="occupied"),F[e].isHit&&(t.dataset.isHit="hit"),F[e].shipId&&(t.dataset.shipId="ship")}},announceShipCreation(){y(modal)},renderBoards(){n.style.setProperty("--grid-rows",10),n.style.setProperty("--grid-cols",10),i.style.setProperty("--grid-rows",10),i.style.setProperty("--grid-cols",10);for(let e=0;e<E.length;e++){const t=document.createElement("div");t.dataset.id=e,E[e].isFree||(t.dataset.isFree="occupied"),E[e].isHit&&(t.dataset.isHit="hit"),E[e].shipId&&(t.dataset.shipId="ship"),i.appendChild(t).className="grid-item",t.addEventListener("click",(()=>{(H.gameboard.isGameOver()||c.gameboard.isGameOver())&&(console.log("GAME OVER"),H.turn=!1),H.turn&&(c.gameboard.receiveAttack(t.dataset.id),t.dataset.isHit="hit",console.log("hits:",c.gameboard.getHitCounter()),console.log("missed shots:",c.gameboard.getMissedShotCounter()),H.turn=!1,c.turn=!0),c.turn&&(this.attack(),this.updateHumanBoard(),c.turn=!1,H.turn=!0)}))}for(let e=0;e<F.length;e++){const t=document.createElement("div");t.dataset.id=`p${e}`,F[e].isFree||(t.dataset.isFree="occupied"),F[e].isHit&&(t.dataset.isHit="hit"),F[e].shipId&&(t.dataset.shipId="ship"),n.appendChild(t).className="grid-item"}},randomCoord:()=>Math.floor(100*Math.random()),randomAttack(){console.log("random attack!!!");let e=this.randomCoord();a.includes(e)?(e=this.randomCoord(),this.randomAttack()):(a.push(e),console.log(a),H.gameboard.receiveAttack(e)?(t=!0,!a.includes(e+1)&&e+1<100&&o.push(e+1),!a.includes(e-1)&&e-1>=0&&o.push(e-1),!a.includes(e+10)&&e+10<100&&o.push(e+10),!a.includes(e-10)&&e-10>=0&&o.push(e-10),console.log(t,o)):t=!1,console.log("randomCell",e),console.log("computer hits:",H.gameboard.getHitCounter()),console.log("computer missed shots:",H.gameboard.getMissedShotCounter()))},targetAttack(){console.log("target attack!!!");const e=o.shift();a.push(e),console.log("coord:",e),H.gameboard.receiveAttack(e)?(t=!0,!a.includes(e+1)&&e+1<100&&o.push(e+1),!a.includes(e-1)&&e-1>=0&&o.push(e-1),!a.includes(e+10)&&e+10<100&&o.push(e+10),!a.includes(e-10)&&e-10>=0&&o.push(e-10),console.log(t,o)):t=!1,console.log("computer hits:",H.gameboard.getHitCounter()),console.log("computer missed shots:",H.gameboard.getMissedShotCounter())},attack(){t||0!==o.length?this.targetAttack():this.randomAttack(),console.log(t,o)},updateHumanBoard(){for(let e=0;e<F.length;e++){const t=document.querySelector(`[data-id="p${e}"]`);F[e].isFree||(t.dataset.isFree="occupied"),F[e].isHit&&(t.dataset.isHit="hit"),F[e].shipId&&(t.dataset.shipId="ship")}}}}},417:(e,t,o)=>{const r=o(507);function s(){const e=r();return{initNewGame(){const t=e.createPlayer("Computer"),o=e.createPlayer("Human");return{computerBattlefield:t.gameboard.getBattlefield(),humanBattlefield:o.gameboard.getBattlefield(),Computer:t,Human:o}}}}const a=s().initNewGame();a.Computer.gameboard.placeShip(3,[25,26,27]);const n=a.Human;n.gameboard.placeShip(3,[1,2,3]),n.gameboard.placeShip(3,[10,11,12]),e.exports=s},498:(e,t,o)=>{const r=o(643);e.exports=function(){let e=0,t=0;const o=[],s=[];return{createCell:e=>({id:e,isFree:!0,isHit:!1,shipId:null}),createGameboard(){for(let e=0;e<100;e++)s.push(this.createCell(e));return s},placeShip(e,t){const a=r(e,t);o.push(a);return t.forEach((e=>{s[e].isFree=!1,s[e].shipId=a.id})),s},getBattlefield:()=>s,getFleet:()=>o,getHitCounter:()=>e,getMissedShotCounter:()=>t,receiveAttack(r){const a=r;if(!1===s[a].isHit&&!1===s[a].isFree){return o.find((e=>e.id===s[a].shipId)).hit(a),s[a].isHit=!0,e++,!0}return s[a].isHit=!0,t++,!1},isGameOver(){let e=0;for(let t=0;t<o.length;t++)!0===o[t].isSunk()&&e++;return e===o.length}}}},507:(e,t,o)=>{const r=o(498);e.exports=function(){return{createPlayer(e){const t=r();return t.createGameboard(),{playerName:e,gameboard:t,turn:!1}},changeTurn:e=>e.turn?(e.turn=!1,e.turn):(e.turn=!0,e.turn),attack:(e,t)=>e.gameboard.receiveAttack(t),randomCoord:()=>Math.floor(100*Math.random())}}},643:e=>{e.exports=function(e,t){let o=0;return{id:Date.now()+Math.floor(100*Math.random()),length:e,coords:t,hit(e){const r=Number(e);return!!t.includes(r)&&(o++,!0)},isSunk:()=>o===e}}}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}(()=>{"use strict";const e=o(171)();e.createGrid(),e.announceShipCreation(),e.renderBoards(),e.playerHuman.turn=!0})()})();