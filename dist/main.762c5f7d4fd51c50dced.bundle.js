(()=>{var t={778:t=>{t.exports=function(){const t=[],e=[];return{randomFleet:t,randomCoord:()=>Math.floor(100*Math.random()),isCrossing(t,e){let r=0;return e.forEach((e=>{t.includes(e)&&r++})),0!==r},createBattleship(){const t=this.createRandomShipCoords(4);return this.isCrossing(e,t)?this.createBattleship():t},createDestroyer(){const t=this.createRandomShipCoords(3);return this.isCrossing(e,t)?this.createDestroyer():t},createSubmarine(){const t=this.createRandomShipCoords(3);return this.isCrossing(e,t)?this.createSubmarine():t},createPatrolBoat(){const t=this.createRandomShipCoords(2);return this.isCrossing(e,t)?this.createPatrolBoat():t},createRandomFleet(){const r=this.createRandomShipCoords(5);t.push([5,r]),r.forEach((t=>{e.push(t)}));const a=this.createBattleship();t.push([4,a]),a.forEach((t=>{e.push(t)}));const o=this.createDestroyer();t.push([3,o]),o.forEach((t=>{e.push(t)}));const s=this.createSubmarine();t.push([3,s]),s.forEach((t=>{e.push(t)}));const i=this.createPatrolBoat();t.push([2,i]),i.forEach((t=>{e.push(t)}))},createRandomShipCoords(t){const e=[],r=Math.round(Math.random()),a=this.randomCoord();if(this.isFit(r,a,t)){if(0===r)for(let r=0;r<t;r++)e.push(a+r);else for(let r=0;r<t;r++)e.push(a+10*r);return e}return this.createRandomShipCoords(t)},createShipCoords(t,e,r){const a=[];if(0===t)for(let t=0;t<r;t++)a.push(e+t);else for(let t=0;t<r;t++)a.push(e+10*t);return a},createValidStartingPoint(t){const e=Math.round(Math.random()),r=this.randomCoord();return this.isFit(e,r,t)?{axis:e,startingPoint:r,length:t}:this.createValidStartingPoint(t)},isFit(t,e,r){const a=10*Math.ceil((e+1)/10);return 1===t?e+10*(r-1)<100:e+(r-1)<a}}}},171:(t,e,r)=>{const a=r(417),o=r(778),s=r(693);t.exports=function(){const t=o();let e=!1;const r=[],i=[],n=document.querySelector("#player-battlefield"),d=document.querySelector("#computer-battlefield"),c=a().initNewGame(),l=c.Computer;!function(){t.createRandomFleet();const e=t.randomFleet;for(let t=0;t<e.length;t++)l.gameboard.placeShip(e[t][0],e[t][1])}();const u=document.getElementById("mute"),h=document.getElementById("startGameModal"),m=document.getElementById("endGameModal"),p=document.querySelectorAll("[data-modal-target]"),g=document.querySelectorAll("[data-close-button]"),f=document.querySelector("[data-reload-button]"),C=document.getElementById("ship"),y=document.getElementById("length"),S=document.getElementById("direction"),b=document.getElementById("winner"),v=document.getElementById("playerHits"),E=document.getElementById("computerHits"),B=document.getElementById("playerMissedShots"),H=document.getElementById("computerMissedShots"),k=document.getElementById("overlay"),I=document.getElementById("player-place-ships"),F=document.querySelector("[data-rotate-button]");let x=0;const P=[["Carrier",5],["Battleship",4],["Destroyer",3],["Submarine",3],["Patrol boat",2]];function w(t){null!=t&&(t.classList.add("active"),k.classList.add("active"))}function M(t){null!=t&&(t.classList.remove("active"),k.classList.remove("active"))}p.forEach((t=>{t.addEventListener("click",(()=>{w(document.querySelector(t.dataset.modalTarget))}))})),k.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((t=>{M(t)}))})),g.forEach((t=>{t.addEventListener("click",(()=>{M(t.closest(".modal"))}))})),F.addEventListener("click",(()=>{0===x?(x=1,S.textContent="Direction: Vertical"):(x=0,S.textContent="Direction: Horizontal")})),f.addEventListener("click",(()=>{window.location.reload()}));const $=new Audio(s);u.addEventListener("click",(()=>{$.pause()}));const A=c.Human,G=l.gameboard.getBattlefield(),L=A.gameboard.getBattlefield();return{playerComputer:l,playerHuman:A,createGrid(){const t=[],e=[];P.forEach((e=>{t.push(e[0])})),P.forEach((t=>{e.push(t[1])}));let r=e.shift(),a=t.shift(),o="Horizontal";o=1===x?"Vertical":"Horizontal",C.textContent=`Place your ${a}`,y.textContent=`Ship length: ${r} cells`,S.textContent=`Direction: ${o}`;const s=A.gameboard.getFleet();I.style.setProperty("--grid-rows",10),I.style.setProperty("--grid-cols",10);for(let i=0;i<G.length;i++){const n=document.createElement("div");n.dataset.id=`psc${i}`,L[i].isFree||(n.dataset.isFree="occupied"),L[i].isHit&&(n.dataset.isHit="hit"),L[i].shipId&&(n.dataset.shipId="ship"),I.appendChild(n).className="grid-item",n.addEventListener("mouseover",(()=>{const t=i;this.checkCoordIsValid(t,r)?n.dataset.valid=!0:n.dataset.valid=!1})),n.addEventListener("click",(()=>{const n=i,d=this.createCoords(n,r);void 0!==d&&(A.gameboard.placeShip(r,d),this.updatePlaceShipContainer(),this.updateHumanBoard(),a=t.shift(),r=e.shift()),o=1===x?"Vertical":"Horizontal",C.textContent=`Place your ${a}`,y.textContent=`Ship length: ${r} cells`,S.textContent=`Direction: ${o}`,5===s.length&&(M(h),this.playAudio())}))}},checkCoordIsValid:(e,r)=>!!t.isFit(x,e,r),createCoords(e,r){let a;return this.checkCoordIsValid(e,r)&&(a=t.createShipCoords(x,e,r)),a},updatePlaceShipContainer(){for(let t=0;t<L.length;t++){const e=document.querySelector(`[data-id="psc${t}"]`);L[t].isFree||(e.dataset.isFree="occupied"),L[t].isHit&&(e.dataset.isHit="hit"),L[t].shipId&&(e.dataset.shipId="ship")}},announceShipCreation(){w(h)},playAudio(){$.play(),$.volume=.2},renderBoards(){n.style.setProperty("--grid-rows",10),n.style.setProperty("--grid-cols",10),d.style.setProperty("--grid-rows",10),d.style.setProperty("--grid-cols",10);for(let t=0;t<G.length;t++){const e=document.createElement("div");e.dataset.id=t,G[t].isFree||(e.dataset.isFree="occupied"),G[t].isHit&&(e.dataset.isHit="hit"),G[t].shipId&&(e.dataset.shipId="ship"),d.appendChild(e).className="grid-item",e.addEventListener("click",(()=>{if((A.gameboard.isGameOver()||l.gameboard.isGameOver())&&(A.turn=!1,this.endGame()),A.turn&&!e.dataset.isHit){l.gameboard.receiveAttack(e.dataset.id),e.dataset.isHit="hit";l.gameboard.getSunkFleet().includes(t)&&(e.dataset.sunk="true"),A.turn=!1,l.turn=!0,(A.gameboard.isGameOver()||l.gameboard.isGameOver())&&(A.turn=!1,this.endGame())}l.turn&&(this.attack(),this.updateHumanBoard(),this.updateComputerBoard(),l.turn=!1,A.turn=!0)}))}for(let t=0;t<L.length;t++){const e=document.createElement("div");e.dataset.id=`p${t}`,L[t].isFree||(e.dataset.isFree="occupied"),L[t].isHit&&(e.dataset.isHit="hit"),L[t].shipId&&(e.dataset.shipId="ship"),n.appendChild(e).className="grid-item"}},endGame(){w(m);const t=A.gameboard.getHitCounter(),e=A.gameboard.getMissedShotCounter(),r=l.gameboard.getHitCounter(),a=l.gameboard.getMissedShotCounter();A.gameboard.isGameOver()?b.textContent="Computer wins":b.textContent="Player wins",v.textContent=`Computer hits: ${t}`,B.textContent=`Computer missed shots: ${e}`,E.textContent=`Player hits: ${r}`,H.textContent=`Player missed shots: ${a}`},randomCoord:()=>Math.floor(100*Math.random()),randomAttack(){let t=this.randomCoord();i.includes(t)?(t=this.randomCoord(),this.randomAttack()):(i.push(t),A.gameboard.receiveAttack(t)?(e=!0,!i.includes(t+1)&&t+1<100&&r.push(t+1),!i.includes(t-1)&&t-1>=0&&r.push(t-1),!i.includes(t+10)&&t+10<100&&r.push(t+10),!i.includes(t-10)&&t-10>=0&&r.push(t-10)):e=!1)},targetAttack(){const t=r.shift();i.push(t),A.gameboard.receiveAttack(t)?(e=!0,!i.includes(t+1)&&t+1<100&&r.push(t+1),!i.includes(t-1)&&t-1>=0&&r.push(t-1),!i.includes(t+10)&&t+10<100&&r.push(t+10),!i.includes(t-10)&&t-10>=0&&r.push(t-10)):e=!1},attack(){e||0!==r.length?this.targetAttack():this.randomAttack()},updateHumanBoard(){for(let t=0;t<L.length;t++){const e=document.querySelector(`[data-id="p${t}"]`),r=A.gameboard.getSunkFleet();L[t].isFree||(e.dataset.isFree="occupied"),L[t].isHit&&(e.dataset.isHit="hit"),L[t].shipId&&(e.dataset.shipId="ship"),r.includes(t)&&(e.dataset.sunk="true")}},updateComputerBoard(){for(let t=0;t<G.length;t++){const e=document.querySelector(`[data-id="${t}"]`),r=l.gameboard.getSunkFleet();G[t].isFree||(e.dataset.isFree="occupied"),G[t].isHit&&(e.dataset.isHit="hit"),G[t].shipId&&(e.dataset.shipId="ship"),r.includes(t)&&(e.dataset.sunk="true")}}}}},417:(t,e,r)=>{const a=r(507);t.exports=function(){const t=a();return{initNewGame(){const e=t.createPlayer("Computer"),r=t.createPlayer("Human");return{computerBattlefield:e.gameboard.getBattlefield(),humanBattlefield:r.gameboard.getBattlefield(),Computer:e,Human:r}}}}},498:(t,e,r)=>{const a=r(643);t.exports=function(){let t=0,e=0;const r=[],o=[];return{createCell:t=>({id:t,isFree:!0,isHit:!1,shipId:null}),createGameboard(){for(let t=0;t<100;t++)o.push(this.createCell(t));return o},placeShip(t,e){const s=a(t,e);r.push(s);return e.forEach((t=>{o[t].isFree=!1,o[t].shipId=s.id})),o},getBattlefield:()=>o,getFleet:()=>r,getHitCounter:()=>t,getMissedShotCounter:()=>e,receiveAttack(a){const s=a;if(!1===o[s].isHit&&!1===o[s].isFree){return r.find((t=>t.id===o[s].shipId)).hit(s),o[s].isHit=!0,t++,!0}return o[s].isHit=!0,e++,!1},isGameOver(){let t=0;for(let e=0;e<r.length;e++)!0===r[e].isSunk()&&t++;return t===r.length},getSunkFleet(){const t=[];for(let e=0;e<r.length;e++)!0===r[e].isSunk()&&r[e].coords.forEach((e=>{t.push(e)}));return t}}}},507:(t,e,r)=>{const a=r(498);t.exports=function(){return{createPlayer(t){const e=a();return e.createGameboard(),{playerName:t,gameboard:e,turn:!1}},changeTurn:t=>t.turn?(t.turn=!1,t.turn):(t.turn=!0,t.turn),attack:(t,e)=>t.gameboard.receiveAttack(e),randomCoord:()=>Math.floor(100*Math.random())}}},643:t=>{t.exports=function(t,e){let r=0;return{id:Date.now()+Math.floor(100*Math.random()),length:t,coords:e,hit(t){const a=Number(t);return!!e.includes(a)&&(r++,!0)},isSunk:()=>r===t}}},693:(t,e,r)=>{"use strict";t.exports=r.p+"sounds/audiob7c787f64ffc370f21af.ogg"}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{"use strict";const t=r(171)();t.createGrid(),t.announceShipCreation(),t.renderBoards(),t.playerHuman.turn=!0})()})();