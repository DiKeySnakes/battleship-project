(()=>{var e={778:e=>{e.exports=function(){const e=[],t=[];return{randomFleet:e,randomCoord:()=>Math.floor(100*Math.random()),isCrossing(e,t){let o=0;return t.forEach((t=>{e.includes(t)&&o++})),0===o?(console.log("false"),!1):(console.log("true"),!0)},createBattleship(){const e=this.createRandomShipCoords(4);return this.isCrossing(t,e)?this.createBattleship():(console.log(e),e)},createDestroyer(){const e=this.createRandomShipCoords(3);return this.isCrossing(t,e)?this.createDestroyer():(console.log(e),e)},createSubmarine(){const e=this.createRandomShipCoords(3);return this.isCrossing(t,e)?this.createSubmarine():(console.log(e),e)},createPatrolBoat(){const e=this.createRandomShipCoords(2);return this.isCrossing(t,e)?this.createPatrolBoat():(console.log(e),e)},createRandomFleet(){const o=this.createRandomShipCoords(5);e.push([5,o]),o.forEach((e=>{t.push(e)})),console.log("first ship:",t);const r=this.createBattleship();e.push([4,r]),r.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const s=this.createDestroyer();e.push([3,s]),s.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const a=this.createSubmarine();e.push([3,a]),a.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t);const n=this.createPatrolBoat();e.push([2,n]),n.forEach((e=>{t.push(e)})),console.log("Fleet",e),console.log("randomCoords:",t)},createRandomShipCoords(e){const t=[],o=Math.round(Math.random()),r=this.randomCoord();if(this.isFit(o,r,e)){if(0===o)for(let o=0;o<e;o++)t.push(r+o);else for(let o=0;o<e;o++)t.push(r+10*o);return console.log(t),t}return this.createRandomShipCoords(e)},createValidStartingPoint(e){const t=Math.round(Math.random()),o=this.randomCoord();return this.isFit(t,o,e)?(console.log("valid:",t,o,e),{axis:t,startingPoint:o,length:e}):this.createValidStartingPoint(e)},isFit(e,t,o){const r=10*Math.ceil((t+1)/10);return 1===e?t+10*(o-1)<100:t+(o-1)<r}}}},171:(e,t,o)=>{const r=o(417),s=o(778);e.exports=function(){const e=s();let t=!1;const o=[],a=[],n=document.querySelector("#player-battlefield"),i=document.querySelector("#computer-battlefield"),c=r().initNewGame(),l=c.Computer;!function(){e.createRandomFleet();const t=e.randomFleet;console.log(t);for(let e=0;e<t.length;e++)l.gameboard.placeShip(t[e][0],t[e][1])}();const d=c.Human;d.gameboard.placeShip(2,[55,65]),d.gameboard.placeShip(3,[1,2,3]),d.gameboard.placeShip(3,[22,23,24]),d.gameboard.placeShip(5,[50,60,70,80,90]),d.gameboard.placeShip(4,[19,29,39,49]);const h=l.gameboard.getBattlefield(),u=d.gameboard.getBattlefield();return{playerComputer:l,playerHuman:d,renderBoards(){n.style.setProperty("--grid-rows",10),n.style.setProperty("--grid-cols",10),i.style.setProperty("--grid-rows",10),i.style.setProperty("--grid-cols",10);for(let e=0;e<h.length;e++){const t=document.createElement("div");t.dataset.id=e,h[e].isFree||(t.dataset.isFree="occupied"),h[e].isHit&&(t.dataset.isHit="hit"),h[e].shipId&&(t.dataset.shipId="ship"),i.appendChild(t).className="grid-item",t.addEventListener("click",(()=>{(d.gameboard.isGameOver()||l.gameboard.isGameOver())&&(console.log("GAME OVER"),d.turn=!1),d.turn&&(l.gameboard.receiveAttack(t.dataset.id),t.dataset.isHit="hit",console.log("hits:",l.gameboard.getHitCounter()),console.log("missed shots:",l.gameboard.getMissedShotCounter()),d.turn=!1,l.turn=!0),l.turn&&(this.attack(),this.updateHumanBoard(),l.turn=!1,d.turn=!0)}))}for(let e=0;e<u.length;e++){const t=document.createElement("div");t.dataset.id=`p${e}`,u[e].isFree||(t.dataset.isFree="occupied"),u[e].isHit&&(t.dataset.isHit="hit"),u[e].shipId&&(t.dataset.shipId="ship"),n.appendChild(t).className="grid-item"}},randomCoord:()=>Math.floor(100*Math.random()),randomAttack(){console.log("random attack!!!");let e=this.randomCoord();a.includes(e)?(e=this.randomCoord(),this.randomAttack()):(a.push(e),console.log(a),d.gameboard.receiveAttack(e)?(t=!0,!a.includes(e+1)&&e+1<100&&o.push(e+1),!a.includes(e-1)&&e-1>=0&&o.push(e-1),!a.includes(e+10)&&e+10<100&&o.push(e+10),!a.includes(e-10)&&e-10>=0&&o.push(e-10),console.log(t,o)):t=!1,console.log("randomCell",e),console.log("computer hits:",d.gameboard.getHitCounter()),console.log("computer missed shots:",d.gameboard.getMissedShotCounter()))},targetAttack(){console.log("target attack!!!");const e=o.shift();a.push(e),console.log("coord:",e),d.gameboard.receiveAttack(e)?(t=!0,!a.includes(e+1)&&e+1<100&&o.push(e+1),!a.includes(e-1)&&e-1>=0&&o.push(e-1),!a.includes(e+10)&&e+10<100&&o.push(e+10),!a.includes(e-10)&&e-10>=0&&o.push(e-10),console.log(t,o)):t=!1,console.log("computer hits:",d.gameboard.getHitCounter()),console.log("computer missed shots:",d.gameboard.getMissedShotCounter())},attack(){t||0!==o.length?this.targetAttack():this.randomAttack(),console.log(t,o)},updateHumanBoard(){for(let e=0;e<u.length;e++){const t=document.querySelector(`[data-id="p${e}"]`);u[e].isFree||(t.dataset.isFree="occupied"),u[e].isHit&&(t.dataset.isHit="hit"),u[e].shipId&&(t.dataset.shipId="ship")}}}}},417:(e,t,o)=>{const r=o(507);function s(){const e=r();return{initNewGame(){const t=e.createPlayer("Computer"),o=e.createPlayer("Human");return{computerBattlefield:t.gameboard.getBattlefield(),humanBattlefield:o.gameboard.getBattlefield(),Computer:t,Human:o}}}}const a=s().initNewGame();a.Computer.gameboard.placeShip(3,[25,26,27]);const n=a.Human;n.gameboard.placeShip(3,[1,2,3]),n.gameboard.placeShip(3,[10,11,12]),e.exports=s},498:(e,t,o)=>{const r=o(643);e.exports=function(){let e=0,t=0;const o=[],s=[];return{createCell:e=>({id:e,isFree:!0,isHit:!1,shipId:null}),createGameboard(){for(let e=0;e<100;e++)s.push(this.createCell(e));return s},placeShip(e,t){const a=r(e,t);o.push(a);return t.forEach((e=>{s[e].isFree=!1,s[e].shipId=a.id})),s},getBattlefield:()=>s,getFleet:()=>o,getHitCounter:()=>e,getMissedShotCounter:()=>t,receiveAttack(r){const a=r;if(!1===s[a].isHit&&!1===s[a].isFree){return o.find((e=>e.id===s[a].shipId)).hit(a),s[a].isHit=!0,e++,!0}return s[a].isHit=!0,t++,!1},isGameOver(){let e=0;for(let t=0;t<o.length;t++)!0===o[t].isSunk()&&e++;return e===o.length}}}},507:(e,t,o)=>{const r=o(498);e.exports=function(){return{createPlayer(e){const t=r();return t.createGameboard(),{playerName:e,gameboard:t,turn:!1}},changeTurn:e=>e.turn?(e.turn=!1,e.turn):(e.turn=!0,e.turn),attack:(e,t)=>e.gameboard.receiveAttack(t),randomCoord:()=>Math.floor(100*Math.random())}}},643:e=>{e.exports=function(e,t){let o=0;return{id:Date.now()+Math.floor(100*Math.random()),length:e,coords:t,hit(e){const r=Number(e);return!!t.includes(r)&&(o++,!0)},isSunk:()=>o===e}}}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}(()=>{"use strict";const e=o(171)();e.renderBoards(),e.playerHuman.turn=!0})()})();